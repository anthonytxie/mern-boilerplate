{"version":3,"sources":["../../server/services/passport.js"],"names":["require","config","serializeUser","user","done","id","deserializeUser","userId","findById","then","use","clientID","process","env","googleClientId","clientSecret","googleClientSecret","callbackURL","accessToken","refreshToken","profile","createOAuthUser"],"mappings":";;AACA;;;;AACA;;;;AACA;;;;;;AAHAA,QAAQ,QAAR,EAAkBC,MAAlB;;;AAKA,mBAASC,aAAT,CAAuB,UAACC,IAAD,EAAOC,IAAP,EAAgB;AACrCA,OAAK,IAAL,EAAWD,KAAKE,EAAhB,EADqC,CAChB;AACtB,CAFD;;AAIA,mBAASC,eAAT,CAAyB,UAACC,MAAD,EAASH,IAAT,EAAkB;AACzC,iBAAKI,QAAL,CAAcD,MAAd,EAAsBE,IAAtB,CAA2B,gBAAQ;AACjCL,SAAK,IAAL,EAAWD,IAAX,EADiC,CACf;AACnB,GAFD;AAGD,CAJD;AAKA,mBAASO,GAAT,CACE,kCACE;AACEC,YAAUC,QAAQC,GAAR,CAAYC,cADxB;AAEEC,gBAAcH,QAAQC,GAAR,CAAYG,kBAF5B;AAGEC,eAAa;AAHf,CADF;AAAA,qEAME,iBAAOC,WAAP,EAAoBC,YAApB,EAAkCC,OAAlC,EAA2ChB,IAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACqB,eAAKiB,eAAL,CAAqB,QAArB,EAA+BD,QAAQf,EAAvC,CADrB;;AAAA;AACQF,gBADR;;AAEEC,iBAAK,IAAL,EAAWD,IAAX;;AAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GANF;;AAAA;AAAA;AAAA;AAAA,IADF","file":"passport.js","sourcesContent":["require('dotenv').config();\nimport User from '../db/models/User.js';\nimport passport from 'passport';\nimport { Strategy as GoogleStrategy } from 'passport-google-oauth20';\n\npassport.serializeUser((user, done) => {\n  done(null, user.id); //passing user.id to done to serialize\n});\n\npassport.deserializeUser((userId, done) => {\n  User.findById(userId).then(user => {\n    done(null, user); //passing deserialized user object to done\n  });\n});\npassport.use(\n  new GoogleStrategy(\n    {\n      clientID: process.env.googleClientId,\n      clientSecret: process.env.googleClientSecret,\n      callbackURL: '/auth/google/callback',\n    },\n    async (accessToken, refreshToken, profile, done) => {\n      const user = await User.createOAuthUser('google', profile.id);\n      done(null, user);\n    }\n  )\n);\n"]}